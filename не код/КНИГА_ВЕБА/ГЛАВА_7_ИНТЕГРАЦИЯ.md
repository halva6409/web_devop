# üìñ –ì–õ–ê–í–ê 7: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ò –õ–£–ß–®–ò–ï –ü–†–ê–ö–¢–ò–ö–ò

## üéØ –¶–µ–ª—å —ç—Ç–æ–π –≥–ª–∞–≤—ã
–¢—ã –ø–æ–π–º—ë—à—å:
- –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ API
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —á–∏—Å—Ç—ã–π –∫–æ–¥
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- Git –∏ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîå –ß–ê–°–¢–¨ 1: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í–ù–ï–®–ù–ò–• API

### –ß—Ç–æ —Ç–∞–∫–æ–µ API?

```
API = Application Programming Interface (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
= —Å–ø–æ—Å–æ–± —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–ª–∏ –º–µ–∂–¥—É —Å–æ–±–æ–π

–ê–Ω–∞–ª–æ–≥–∏—è: –†–µ—Å—Ç–æ—Ä–∞–Ω
- Frontend (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç —É –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞
- Backend (–æ—Ñ–∏—Ü–∏–∞–Ω—Ç) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑ –Ω–∞ –∫—É—Ö–Ω—é
- API (–º–µ–Ω—é) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ

–ü—Ä–∏–º–µ—Ä—ã API:
- OpenWeatherMap - –ø–æ–≥–æ–¥–∞
- Google Maps - –∫–∞—Ä—Ç—ã –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- Stripe - –ø–ª–∞—Ç–µ–∂–∏
- Telegram - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- Twitter - –ø–æ—Å—Ç –≤ —Ç–≤–∏—Ç
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API —Å–µ—Ä–≤–∏—Å–æ–≤

**OpenWeatherMap API (–ø–æ–≥–æ–¥–∞):**
```python
import requests

API_KEY = "your-api-key"
location = "Moscow"

response = requests.get(
    f"https://api.openweathermap.org/data/2.5/weather",
    params={
        "q": location,
        "appid": API_KEY,
        "units": "metric"  # –¶–µ–ª—å—Å–∏–π –≤–º–µ—Å—Ç–æ –ö–µ–ª—å–≤–∏–Ω–∞
    }
)

data = response.json()

if response.status_code == 200:
    print(f"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ {location}: {data['main']['temp']}¬∞C")
    print(f"–û–ø–∏—Å–∞–Ω–∏–µ: {data['weather'][0]['description']}")
else:
    print(f"–û—à–∏–±–∫–∞: {response.status_code}")
```

**Telegram Bot API (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π):**
```python
import requests

TELEGRAM_BOT_TOKEN = "your-token"
CHAT_ID = "your-chat-id"

def send_notification(message):
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    
    data = {
        "chat_id": CHAT_ID,
        "text": message,
        "parse_mode": "HTML"
    }
    
    response = requests.post(url, json=data)
    
    if response.status_code == 200:
        print("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
    else:
        print(f"–û—à–∏–±–∫–∞: {response.text}")

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
send_notification("–ü—Ä–∏–≤–µ—Ç! <b>–≠—Ç–æ –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b>")
```

**Google Maps API (–∫–∞—Ä—Ç—ã):**
```python
import requests

GOOGLE_API_KEY = "your-key"

def get_coordinates(address):
    """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∞–¥—Ä–µ—Å–∞"""
    url = "https://maps.googleapis.com/maps/api/geocode/json"
    
    response = requests.get(url, params={
        "address": address,
        "key": GOOGLE_API_KEY
    })
    
    data = response.json()
    
    if data['status'] == 'OK':
        location = data['results'][0]['geometry']['location']
        return {
            "latitude": location['lat'],
            "longitude": location['lng'],
            "formatted_address": data['results'][0]['formatted_address']
        }
    else:
        return None

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
coords = get_coordinates("Moscow Red Square")
# {'latitude': 55.7539, 'longitude': 37.6208, ...}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ API –∑–∞–ø—Ä–æ—Å–∞—Ö

```python
import requests
from requests.exceptions import RequestException, Timeout

def safe_api_call(url, timeout=5):
    """–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"""
    try:
        response = requests.get(url, timeout=timeout)
        response.raise_for_status()  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
        return response.json()
        
    except Timeout:
        print("–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª (timeout)")
        return None
        
    except requests.ConnectionError:
        print("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞?)")
        return None
        
    except requests.HTTPError as e:
        print(f"HTTP –æ—à–∏–±–∫–∞: {response.status_code}")
        return None
        
    except ValueError:
        print("–û—Ç–≤–µ—Ç –Ω–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON")
        return None
        
    except RequestException as e:
        print(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞: {str(e)}")
        return None

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
data = safe_api_call("https://api.example.com/data")
if data:
    print(data)
else:
    print("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ")
```

### Rate Limiting (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤)

```python
from datetime import datetime, timedelta

class APIRateLimiter:
    """–ö–ª–∞—Å—Å –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã API –∑–∞–ø—Ä–æ—Å–æ–≤"""
    def __init__(self, max_requests=100, period_seconds=3600):
        self.max_requests = max_requests
        self.period = timedelta(seconds=period_seconds)
        self.requests = []
    
    def is_allowed(self):
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å"""
        now = datetime.now()
        
        # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Å—Ç–∞—Ä—à–µ period)
        self.requests = [
            req_time for req_time in self.requests
            if now - req_time < self.period
        ]
        
        if len(self.requests) < self.max_requests:
            self.requests.append(now)
            return True
        else:
            return False
    
    def wait_until_allowed(self):
        """–ñ–¥–∞—Ç—å –ø–æ–∫–∞ –Ω–µ —Å–º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å"""
        while not self.is_allowed():
            oldest = self.requests[0]
            wait_time = (oldest + self.period - datetime.now()).total_seconds()
            print(f"–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç. –ñ–¥—É {wait_time:.0f} —Å–µ–∫...")
            time.sleep(min(wait_time, 1))

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
limiter = APIRateLimiter(max_requests=10, period_seconds=60)

for i in range(15):
    if not limiter.is_allowed():
        print("–õ–∏–º–∏—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç, –∂–¥—ë–º...")
        limiter.wait_until_allowed()
    
    print(f"–ó–∞–ø—Ä–æ—Å {i+1}")
```

---

## üèóÔ∏è –ß–ê–°–¢–¨ 2: –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò –ß–ò–°–¢–´–ô –ö–û–î

### MVC –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Model, View, Controller)

```
User Request
    ‚Üì
Route (–º–∞—Ä—à—Ä—É—Ç)
    ‚Üì
Controller (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ª–æ–≥–∏–∫–∏)
    ‚Üì
Model (—Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏)
    ‚Üì
Database
    ‚Üì
Controller (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞)
    ‚Üì
View (HTML —à–∞–±–ª–æ–Ω)
    ‚Üì
Response (HTML)
```

**–ü—Ä–∏–º–µ—Ä —Å MVC:**

```python
# ===== MODEL (app/models.py) =====
from app import db

class News(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(200), nullable=False)
    content = db.Column(db.Text)
    source = db.Column(db.String(100))
    created_at = db.Column(db.DateTime, default=datetime.now)
    
    def to_dict(self):
        return {
            'id': self.id,
            'title': self.title,
            'content': self.content,
            'source': self.source
        }

# ===== CONTROLLER (app/routes.py) =====
from flask import Blueprint, request, jsonify
from app.models import News
from app import db

api = Blueprint('api', __name__, url_prefix='/api')

@api.route('/news', methods=['GET'])
def get_news():
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏"""
    page = request.args.get('page', 1, type=int)
    news = News.query.paginate(page=page, per_page=10)
    
    return jsonify({
        'items': [n.to_dict() for n in news.items],
        'total': news.total,
        'page': page
    })

@api.route('/news/<int:news_id>', methods=['GET'])
def get_news_by_id(news_id):
    """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –Ω–æ–≤–æ—Å—Ç—å"""
    news = News.query.get_or_404(news_id)
    return jsonify(news.to_dict())

@api.route('/news', methods=['POST'])
def create_news():
    """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å"""
    data = request.json
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è
    if not data.get('title'):
        return {'error': 'Title required'}, 400
    
    news = News(
        title=data['title'],
        content=data.get('content'),
        source=data.get('source')
    )
    
    db.session.add(news)
    db.session.commit()
    
    return jsonify(news.to_dict()), 201

# ===== VIEW (templates/news.html) =====
{% extends "base.html" %}

{% block content %}
<div class="news-list">
    {% for item in news_items %}
        <div class="news-card">
            <h3>{{ item.title }}</h3>
            <p>{{ item.content }}</p>
            <small>{{ item.source }}</small>
        </div>
    {% endfor %}
</div>
{% endblock %}

# ===== MAIN APP (app/__init__.py) =====
from flask import Flask
from flask_sqlalchemy import SQLAlchemy

db = SQLAlchemy()

def create_app():
    app = Flask(__name__)
    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///app.db'
    
    db.init_app(app)
    
    from app.routes import api
    app.register_blueprint(api)
    
    return app
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞ (SOLID)

**S - Single Responsibility (–æ–¥–∏–Ω –∫–ª–∞—Å—Å = –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞)**
```python
# ‚ùå –ü–ª–æ—Ö–æ (–∫–ª–∞—Å—Å –¥–µ–ª–∞–µ—Ç –≤—Å—ë)
class NewsManager:
    def add_news(self, ...): pass
    def parse_html(self, ...): pass
    def send_email(self, ...): pass
    def delete_old_news(self, ...): pass

# ‚úÖ –•–æ—Ä–æ—à–æ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ)
class NewsRepository:
    def add(self, news): pass
    def get_all(self): pass

class NewsParser:
    def parse_html(self, ...): pass

class NewsNotifier:
    def send_email(self, ...): pass

class NewsProcessor:
    def delete_old(self): pass
```

**O - Open/Closed (–æ—Ç–∫—Ä—ã—Ç–æ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∑–∞–∫—Ä—ã—Ç–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è)**
```python
# ‚ùå –ü–ª–æ—Ö–æ (–Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥)
def apply_discount(user, discount_type):
    if discount_type == 'regular':
        return user.price * 0.9
    elif discount_type == 'vip':
        return user.price * 0.8
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ç–∏–ø? –ú–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é!

# ‚úÖ –•–æ—Ä–æ—à–æ (–¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å)
class Discount:
    def apply(self, price): pass

class RegularDiscount(Discount):
    def apply(self, price):
        return price * 0.9

class VIPDiscount(Discount):
    def apply(self, price):
        return price * 0.8
```

**L - Liskov Substitution (–ø–æ–¥–∫–ª–∞—Å—Å—ã –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã)**
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (Â≠ê–∫–ª–∞—Å—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å–ª–µ–¥—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
class Bird:
    def fly(self): pass

class Eagle(Bird):
    def fly(self):
        return "Flying at 100 km/h"

class Penguin(Bird):
    def fly(self):
        raise NotImplementedError("–ü–∏–Ω–≥–≤–∏–Ω—ã –Ω–µ –ª–µ—Ç–∞—é—Ç!")

# ‚ùå –õ—É—á—à–µ —Ç–∞–∫:
class Bird:
    pass

class FlyingBird(Bird):
    def fly(self): pass

class Penguin(Bird):
    def swim(self): pass
```

**I - Interface Segregation (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)**
```python
# ‚ùå –ü–ª–æ—Ö–æ (–±–æ–ª—å—à–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
class Worker:
    def work(self): pass
    def eat_lunch(self): pass

# ‚úÖ –•–æ—Ä–æ—à–æ (—Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
class Workable:
    def work(self): pass

class Eatable:
    def eat_lunch(self): pass
```

**D - Dependency Inversion (–∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π)**
```python
# ‚ùå –ü–ª–æ—Ö–æ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞)
class NewsService:
    def __init__(self):
        self.db = PostgresqlDatabase()  # –ü—Ä–∏–≤—è–∑–∞–Ω—ã –∫ PostgreSQL!

# ‚úÖ –•–æ—Ä–æ—à–æ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
class NewsService:
    def __init__(self, database):
        self.db = database  # –ú–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–∞—è –ë–î

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
news_service = NewsService(PostgresqlDatabase())
news_service_test = NewsService(MockDatabase())
```

---

## üß™ –ß–ê–°–¢–¨ 3: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### Unit —Ç–µ—Å—Ç—ã (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π)

```python
# tests/test_models.py
import unittest
from app import create_app, db
from app.models import News

class TestNews(unittest.TestCase):
    def setUp(self):
        """–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º"""
        self.app = create_app()
        self.app.config['TESTING'] = True
        self.app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory'
        
        with self.app.app_context():
            db.create_all()
    
    def tearDown(self):
        """–û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞"""
        with self.app.app_context():
            db.session.remove()
            db.drop_all()
    
    def test_create_news(self):
        """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏"""
        news = News(title='Test News', source='BBC')
        
        with self.app.app_context():
            db.session.add(news)
            db.session.commit()
            
            result = News.query.filter_by(title='Test News').first()
            self.assertIsNotNone(result)
            self.assertEqual(result.source, 'BBC')
    
    def test_news_to_dict(self):
        """–¢–µ—Å—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Å–ª–æ–≤–∞—Ä—å"""
        news = News(
            title='Test', 
            content='Content',
            source='Reuters'
        )
        
        result = news.to_dict()
        self.assertEqual(result['title'], 'Test')
        self.assertEqual(result['source'], 'Reuters')

if __name__ == '__main__':
    unittest.main()
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
python -m unittest discover tests/

# –ò–ª–∏ —Å pytest (–ª—É—á—à–µ)
pip install pytest
pytest

# C –ø–æ–∫—Ä—ã—Ç–∏–µ–º (—Å–∫–æ–ª—å–∫–æ % –∫–æ–¥–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ)
pip install pytest-cov
pytest --cov=app
```

### API —Ç–µ—Å—Ç—ã

```python
# tests/test_api.py
import unittest
import json
from app import create_app, db
from app.models import News

class TestAPI(unittest.TestCase):
    def setUp(self):
        self.app = create_app()
        self.app.config['TESTING'] = True
        self.client = self.app.test_client()
        
        with self.app.app_context():
            db.create_all()
    
    def test_get_news(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π"""
        # –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        with self.app.app_context():
            news = News(title='Breaking News', source='BBC')
            db.session.add(news)
            db.session.commit()
        
        # –°–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å
        response = self.client.get('/api/news')
        
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        self.assertEqual(response.status_code, 200)
        data = json.loads(response.data)
        self.assertEqual(len(data['items']), 1)
        self.assertEqual(data['items'][0]['title'], 'Breaking News')
    
    def test_create_news(self):
        """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ API"""
        response = self.client.post(
            '/api/news',
            json={
                'title': 'New Article',
                'content': 'Some content',
                'source': 'CNN'
            }
        )
        
        self.assertEqual(response.status_code, 201)
        data = json.loads(response.data)
        self.assertEqual(data['title'], 'New Article')
    
    def test_create_news_without_title(self):
        """–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–µ–∑ title"""
        response = self.client.post(
            '/api/news',
            json={'content': 'Content only'}
        )
        
        self.assertEqual(response.status_code, 400)
        self.assertIn('error', response.json)
```

### pytest (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```python
# tests/conftest.py
import pytest
from app import create_app, db as _db

@pytest.fixture(scope="session")
def app():
    """–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤"""
    app = create_app()
    app.config['TESTING'] = True
    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory'
    
    return app

@pytest.fixture
def db(app):
    """–°–æ–∑–¥–∞—Ç—å –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞"""
    with app.app_context():
        _db.create_all()
        yield _db
        _db.session.remove()
        _db.drop_all()

@pytest.fixture
def client(app):
    """–ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    return app.test_client()

# tests/test_api.py
def test_get_news(client, db):
    """–ü—Ä–æ—Å—Ç–æ –∏ –∫—Ä–∞—Å–∏–≤–æ!"""
    from app.models import News
    
    news = News(title='Test', source='Reuters')
    db.session.add(news)
    db.session.commit()
    
    response = client.get('/api/news')
    assert response.status_code == 200
    assert len(response.json['items']) == 1
```

---

## ü§ù –ß–ê–°–¢–¨ 4: GIT –ò –ö–û–ú–ê–ù–î–ù–ê–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ê

### Git workflow –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –¥–ª—è –∑–∞–¥–∞—á–∏
git checkout main
git pull origin main
git checkout -b feature/add-user-auth

# 2. –î–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç—ã (–º–∞–ª–µ–Ω—å–∫–∏–µ, –ª–æ–≥–∏—á–Ω—ã–µ)
git add app/auth.py
git commit -m "Add password hashing to user registration"

git add tests/test_auth.py
git commit -m "Add tests for password validation"

# 3. –°–¥–µ–ª–∞—Ç—å pull request –Ω–∞ GitHub
git push origin feature/add-user-auth
# –ù–∞ GitHub: Open Pull Request

# 4. –ü–æ—Å–ª–µ review: merge –≤ main
git checkout main
git pull origin main
git merge feature/add-user-auth
git push origin main

# 5. –£–¥–∞–ª–∏—Ç—å –≤–µ—Ç–∫—É
git branch -d feature/add-user-auth
```

### –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–º–º–∏—Ç–æ–≤ (Conventional Commits)

```
<type>(<scope>): <subject>

<body>

<footer>

=====

–ü—Ä–∏–º–µ—Ä—ã:

feat(auth): add JWT token support
fix(database): handle NULL values in migration
docs(README): update installation instructions
test(api): add tests for user endpoints
refactor(models): simplify News model
chore(deps): upgrade Flask to 3.0
```

**–¢–∏–ø—ã:**
- `feat` - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `fix` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
- `docs` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `test` - —Ç–µ—Å—Ç—ã
- `refactor` - –ø–µ—Ä–µ–¥–µ–ª–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è
- `perf` - —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `chore` - –¥—Ä—É–≥–∏–µ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ–Ω—Ñ–∏–≥)

### .gitignore (—á—Ç–æ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å)

```
# .gitignore —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
.env
.env.local

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
venv/
env/

# –ë–î
*.db
*.sqlite
*.sqlite3

# –õ–æ–≥–∏
logs/
*.log

# –ö—ç—à
__pycache__/
.pytest_cache/
.coverage

# IDE
.vscode/
.idea/
*.swp

# –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
uploads/

# OS
.DS_Store
Thumbs.db
```

---

## ‚ö° –ß–ê–°–¢–¨ 5: –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ò –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î –∑–∞–ø—Ä–æ—Å–æ–≤

```python
# ‚ùå –ü–ª–æ—Ö–æ (N+1 –ø—Ä–æ–±–ª–µ–º–∞)
news_list = News.query.all()
for news in news_list:
    print(news.source.name)  # ‚Üê –î–æ–ø. –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ—Å—Ç–∏!
# 1 –∑–∞–ø—Ä–æ—Å (–≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏) + 100 –∑–∞–ø—Ä–æ—Å–æ–≤ (–∏—Å—Ç–æ—á–Ω–∏–∫–∏) = 101 –∑–∞–ø—Ä–æ—Å!

# ‚úÖ –•–æ—Ä–æ—à–æ (eager loading)
news_list = News.query.join(Source).all()
for news in news_list:
    print(news.source.name)  # ‚Üê –£–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!
# –í—Å–µ–≥–æ 1 –∑–∞–ø—Ä–æ—Å!

# ‚úÖ –ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
from sqlalchemy.orm import joinedload
news_list = News.query.options(joinedload('source')).all()
```

### –ò–Ω–¥–µ–∫—Å—ã –ë–î

```python
# –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–µ –ø–æ–ª–µ
class News(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(200), index=True)  # –ë—ã—Å—Ç—Ä–µ–µ –∏—Å–∫–∞—Ç—å
    source_id = db.Column(db.Integer, db.ForeignKey('source.id'), index=True)
    created_at = db.Column(db.DateTime, index=True)
    
    # –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å
    __table_args__ = (
        db.Index('idx_source_date', 'source_id', 'created_at'),
    )
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```python
from flask_caching import Cache
import hashlib

cache = Cache(app, config={'CACHE_TYPE': 'simple'})

# –ö—ç—à —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∫–ª—é—á–æ–º
@app.route('/api/trending-news')
@cache.cached(timeout=300)  # –ù–∞ 5 –º–∏–Ω—É—Ç
def trending_news():
    # –≠—Ç–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –ø–æ—Ç–æ–º –±–µ—Ä—ë–º –∏–∑ –∫—ç—à–∞
    ...

# –ö—ç—à —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –∫–ª—é—á–æ–º
@app.route('/api/search/<query>')
def search(query):
    cache_key = f"search:{query}"
    result = cache.get(cache_key)
    
    if result is None:
        # –í—ã—á–∏—Å–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        result = perform_search(query)
        cache.set(cache_key, result, timeout=600)
    
    return result

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
cache.clear()
cache.delete('search:python')
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (Celery)

```python
from celery import Celery

celery = Celery('app')

# –î–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç)
@celery.task
def send_email_notification(user_id, message):
    user = User.query.get(user_id)
    
    import smtplib
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å email (—ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ª–≥–∏–º)
    ...

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
@app.route('/api/send-notification', methods=['POST'])
def send_notification():
    user_id = request.json['user_id']
    message = request.json['message']
    
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
    send_email_notification.delay(user_id, message)
    
    return {'status': 'notification queued'}, 202

# –ó–∞–ø—É—Å—Ç–∏—Ç—å worker (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
# celery -A app.celery worker --loglevel=info
```

### CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

```html
<!-- –ò—Å–ø–æ–ª—å–∑—É–π CDN –¥–ª—è jQuery, Bootstrap –∏ —Ç.–¥. -->

<!-- ‚ùå –ü–ª–æ—Ö–æ (—Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞) -->
<script src="/static/js/jquery.min.js"></script>

<!-- ‚úÖ –•–æ—Ä–æ—à–æ (—Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å –±—ã—Å—Ç—Ä–æ–≥–æ CDN) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π JS –Ω–∞ CDN (CloudFlare, AWS S3, –∏ —Ç.–¥.) -->
<script src="https://cdn.mysite.com/js/app.min.js"></script>
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

```python
import time
from functools import wraps

def measure_performance(f):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"""
    @wraps(f)
    def decorated(*args, **kwargs):
        start = time.time()
        result = f(*args, **kwargs)
        duration = time.time() - start
        
        if duration > 1.0:  # –ï—Å–ª–∏ –¥–æ–ª—å—à–µ 1 —Å–µ–∫ - –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å
            app.logger.warning(f"{f.__name__} took {duration:.2f}s")
        
        return result
    return decorated

@app.route('/api/news')
@measure_performance
def get_news():
    # –ï—ë –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±—É–¥–µ—Ç –∏–∑–º–µ—Ä–µ–Ω–æ
    ...
```

---

## üéì –ò–¢–û–ì–ò

–ü–æ—Å–ª–µ —ç—Ç–æ–π –≥–ª–∞–≤—ã —Ç—ã –∑–Ω–∞–µ—à—å:
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API
- ‚úÖ MVC –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø—ã —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞ (SOLID)
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –∏ API —Ç–µ—Å—Ç—ã
- ‚úÖ Git workflow –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–í–µ—á–µ—Ä–æ–º –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —Ç—ã:**
- –ù–∞–ø–∏—à–µ—à—å –∫–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏ –∫–æ–¥ –ø–æ MVC –ø–∞—Ç—Ç–µ—Ä–Ω—É
- –°–æ–∑–¥–∞—à—å unit —Ç–µ—Å—Ç—ã
- –ù–∞–ø–∏—à–µ—à—å —á–∏—Å—Ç—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—à—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ù–∞—Å—Ç—Ä–æ–∏—à—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–¢—ã –ø—Ä–æ—à—ë–ª –≤–µ—Å—å –º–∞—Ç–µ—Ä–∏–∞–ª! –û—Ç HTML –¥–æ production!

### –ß—Ç–æ —Ç—ã —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å:

‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
‚úÖ –°—Ç—Ä–æ–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
‚úÖ –ü–∏—Å–∞—Ç—å —á–∏—Å—Ç—ã–π —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥
‚úÖ –†–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–∞–∫—Ç–∏–∫–∞** - –¥–µ–ª–∞–π –ø—Ä–æ–µ–∫—Ç—ã, –ø–æ–ø–∞–¥–∞–π –≤ –æ—à–∏–±–∫–∏
2. **–ì–ª—É–±–æ–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ** - –≤—ã–±–µ—Ä–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –æ–±–ª–∞—Å—Ç—å –∏ —É–≥–ª—É–±–ª—è–π—Å—è
3. **–°–æ–æ–±—â–µ—Å—Ç–≤–æ** - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
4. **Open Source** - —É—á–∞—Å—Ç–≤—É–π –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

### –†–µ—Å—É—Ä—Å—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è:

- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
  - Flask: https://flask.palletsprojects.com/
  - PostgreSQL: https://www.postgresql.org/docs/
  - Python: https://docs.python.org/3/

- **–û–±—É—á–∞—é—â–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã**
  - FreeCodeCamp (YouTube)
  - Real Python
  - –ê–ª–≥–æ—Ä–∏—Ç–º—ã –Ω–∞ Python

- **–ü—Ä–∞–∫—Ç–∏–∫–∞**
  - GitHub Issues
  - LeetCode, HackerRank
  - –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

---

**–ü–æ–º–Ω–∏:** –õ—É—á—à–∏–π —Å–ø–æ—Å–æ–± —É—á–∏—Ç—å—Å—è - —ç—Ç–æ –¥–µ–ª–∞—Ç—å! üöÄ

–£–¥–∞—á–∏ –≤ –∫–∞—Ä—å–µ—Ä–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞!
